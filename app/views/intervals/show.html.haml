%h3.grid_5#title
  Place Holder Title 
%div.grid_16.meta_info_container
  This is going to be the meta data

%div.grid_16#video_container
  = video_tag interval_path(@interval.id, :format => :m4v), :controls => true, :height => 400, :width => 950

%div.grid_16#tag_container.interaction_container
  %h4
    -#="Tags(#{@applied_tags.length})"
    Tags(
    %span#tag_count
      =@applied_tags.length
    )
  %div.tag_form
    %p
      Enter the name of the tag you wish to create or select one of the tags listed below
    -form_for @tag , :as => :tagging, :url => interval_taggings_path(@interval, :format => :json), :remote => true, :html => {:id => "new_tag_form"}  do |f|
      =f.text_field :name
  %ul#tag_list
    -if !@applied_tags.blank?
      -for tagging in @applied_tags
        %li.tag.applied
          =tagging.tag.name



.grid_16#phenomenon_container.interaction_container
  %h4
    ="Phenomenon(#{@applied_phenomenon.length})"
  = display_coding_term(@applied_phenomenon, @all_phenomenon)

.grid_16#people_container.interaction_container
  %h4
    ="People(#{@applied_people.length})"
  = display_coding_term(@applied_people, @all_people)

:javascript
  jQuery(document).ready(function(){
    $("#tag_container").delegate(".tag", "click", function(){
      alert("I was clicked");
    });

    $("#people_container, #phenomenon_container").delegate(".code", "click", function(){
      alert("I was clicked");
    });

    $("#new_tag_form").bind("ajax:error", function(){
      $("body").append('<div class="flash alert"> Your Tag could not be submitted at this time </div>');  
    });

    $("#new_tag_form").bind("ajax:success", function(data, xhr, status){
      $("body").append('<div class="flash notice"> Your Tag has been added </div>');  
      var newTagName = xhr["tagName"]
      console.log("tag successfully added" + newTagName);

      //append the new tag to the tag list
      $("#tag_list").append('<li class="tag applied">' + newTagName + '</li>');

      //update the tag count
      var current_value = $("#tag_count");
      console.log(current_value.text());
      current_value.text(parseInt(current_value.text()) + 1);

    });
    
  })
    
